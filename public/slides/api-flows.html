<div class="fragment fade-in-then-out">
  <h3>The patron API flow</h3>
</div>

<div class="fragment fade-in-then-out">
  <p>Let's translate the patron's user journey to an API flow.</p>
</div>
<div class="fragment fade-in-then-out">
  <h5>Start browsing</h5>
  <p>Patron begins using the food ordering app and starts browsing the menu.</p>
</div>

<div class="fragment fade-in-then-out">
  <p>
    The API client needs to retrieve a list of dishes using the following
    endpoint:
  </p>

  <div class="operation-container">
    <div class="operation operation-get">
      <div class="method method-get">GET</div>
      <div class="path">/dishes</div>
      <div class="summary">Get a list of dishes</div>
      <div class="right-icons">
        <div class="auth-btn-container locked">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 20 20"
            class="locked"
            width="20"
            height="20"
            aria-hidden="true"
            focusable="false"
          >
            <path
              d="M15.8 8H14V5.6C14 2.703 12.665 1 10 1 7.334 1 6 2.703 6 5.6V8H4c-.553 0-1 .646-1 1.199V17c0 .549.428 1.139.951 1.307l1.197.387C5.672 18.861 6.55 19 7.1 19h5.8c.549 0 1.428-.139 1.951-.307l1.196-.387c.524-.167.953-.757.953-1.306V9.199C17 8.646 16.352 8 15.8 8zM12 8H8V5.199C8 3.754 8.797 3 10 3c1.203 0 2 .754 2 2.199V8z"
            ></path>
          </svg>
        </div>

        <div class="op-block-arrow-container">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 20 20"
            class="arrow"
            width="20"
            height="20"
            aria-hidden="true"
            focusable="false"
          >
            <path
              d="M17.418 6.109c.272-.268.709-.268.979 0s.271.701 0 .969l-7.908 7.83c-.27.268-.707.268-.979 0l-7.908-7.83c-.27-.268-.27-.701 0-.969.271-.268.709-.268.979 0L10 13.25l7.418-7.141z"
            ></path>
          </svg>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="fragment fade-in-then-out">
  <p>
    The API client must organize dishes by category in the UI. For example,
    "Appetizers", "Main Course", etc.
  </p>
  <p>
    The filter looks like:
    <code>?filter=category.eq~Main%20Course </code>
  </p>
</div>

<div class="fragment fade-in-then-out">
  <p>
    The API client only needs to display a summary of each dish on the first
    page. To do this, we filter the response to return only the fields:
    <code>name</code>, <code>price</code>, and <code>image_name</code>.
  </p>
  <p>
    The filter looks like:
    <code> ?fields=name|price|image_name </code>
  </p>
</div>

<div class="fragment fade-in-then-out">
  <p>
    Combining both filters results in this query string:
    <code> ?fields=name|price|image_name&filter=category.eq~Appetizers </code>
  </p>

  <p>
    The API client app sends an HTTP request, filtering the response to only
    include dishes belonging to the "Appetizer" category (the first one) and
    filters only certain fields.
  </p>

  <pre><code class="language-shell">curl --location 'http://localhost:8080/dishes?fields=name|price|image_name|ingredients&filter=category.eq~Appetizers' \
      --header 'Accept: application/json'</code></pre>
</div>

<div class="fragment fade-in-then-out">
  <h5></h5>
  <p>
    The API responses with a <code>200 OK</code> success status code with the
    response body containing a list of dishes that match the criteria.
  </p>
  <pre><code class="language-json">{
    "results": [
        {
            "name": "Greek salad",
            "price": 399,
            "image_name": "greek_salad",
            "ingredients": [
            {
                "ingredient_id": "66d6e3749d60891abff847f2",
                "is_essential": false,
                "_id": "66d6e3749d60891abff84816"
            },
            {
                "ingredient_id": "66d6e3749d60891abff847e5",
                "is_essential": false,
                "_id": "66d6e3749d60891abff84817"
            },
            {
                "ingredient_id": "66d6e3749d60891abff847f8",
                "is_essential": false,
                "_id": "66d6e3749d60891abff84818"
            },

            ]
        }
    ],
    "total_results": 11
}
  </code></pre>
</div>

<div class="fragment fade-in-then-out">
  <h5></h5>
  <p>
    It saves information about each dish's ingredients to local storage to use
    during the next step.
  </p>
</div>

<div class="fragment fade-in-then-out">
  <h5>Check ingredient quantities</h5>
  <p>
    Before displaying the dishes in the UI, the client app must verify if the
    necessary ingredients are available in the inventory.
  </p>
</div>

<div class="fragment fade-in-then-out">
  <h5></h5>
  <p>
    For a given dish, the client references its associated ingredient IDs,
    noting whether the ingredient is essential to dish, based on the
    `is_essential` boolean.
  </p>
</div>

<div class="fragment fade-in-then-out">
  <h5></h5>
  <p>
    If an essential ingredient has zero quantity, then the UI can disable the
    selection of the dish in the UI.
  </p>
</div>

<div class="fragment fade-in-then-out">
  <h5></h5>
  <p>
    To verify a dish's ingredient quantities, the client needs to send an HTTP
    request using the following endpoint:
  </p>
  <div class="operation-container">
    <div class="operation operation-get">
      <div class="method method-get">GET</div>
      <div class="path">/ingredients/{ingredient_id}</div>
      <div class="summary">View an ingredient</div>
      <div class="right-icons">
        <div class="auth-btn-container locked">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 20 20"
            class="locked"
            width="20"
            height="20"
            aria-hidden="true"
            focusable="false"
          >
            <path
              d="M15.8 8H14V5.6C14 2.703 12.665 1 10 1 7.334 1 6 2.703 6 5.6V8H4c-.553 0-1 .646-1 1.199V17c0 .549.428 1.139.951 1.307l1.197.387C5.672 18.861 6.55 19 7.1 19h5.8c.549 0 1.428-.139 1.951-.307l1.196-.387c.524-.167.953-.757.953-1.306V9.199C17 8.646 16.352 8 15.8 8zM12 8H8V5.199C8 3.754 8.797 3 10 3c1.203 0 2 .754 2 2.199V8z"
            ></path>
          </svg>
        </div>

        <div class="op-block-arrow-container">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 20 20"
            class="arrow"
            width="20"
            height="20"
            aria-hidden="true"
            focusable="false"
          >
            <path
              d="M17.418 6.109c.272-.268.709-.268.979 0s.271.701 0 .969l-7.908 7.83c-.27.268-.707.268-.979 0l-7.908-7.83c-.27-.268-.27-.701 0-.969.271-.268.709-.268.979 0L10 13.25l7.418-7.141z"
            ></path>
          </svg>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="fragment fade-in-then-out">
  <h5></h5>
  <p>
    The API client sends an HTTP request, filtering the response to only include
    the ingredient quantity and name:
  </p>
  <pre><code>curl -X 'GET' \
'http://localhost:8080/ingredients/614d706b67c122001f35cc47?fields=in_stock_qty' \
-H 'accept: application/json'</code></pre>
</div>

<div class="fragment fade-in-then-out">
  <p>
    The server responds with a <code>200 OK</code> status code with the response
    body containing the ingredient name and quantity:
  </p>
  <pre><code class="language-json">{
    "name": "Lettuce"
    "in_stock_qty": 3
}</code></pre>
</div>

<div class="fragment fade-in-then-out">
  <h5></h5>
  <p>
    The API client can now display the list of dishes in the UI for a given
    'category' tab, disabling those that contain essential ingredients with zero
    quantities and perhaps alerting admins about the ones with zero quantity.
  </p>
</div>

<div class="fragment fade-in-then-out">
  <h5></h5>
  <p>
    If a dish contains a non-essential ingredient with zero quantity, the client
    can inform the user on the dish's details page.
  </p>
</div>
<div class="fragment fade-in-then-out">
  <h5>View dish details</h5>
  <p>
    The patron selects a dish from the list to get more information about it and
    potentially add it to their order.
  </p>
</div>
<div>
  <p>
    The API client saves the dish Id of the dish the patron tapped/clicked for
    the next step.
  </p>
</div>

<div class="fragment fade-in-then-out">
  <p>
    The API client needs to retrieve that dish's details using the following
    endpoint:
  </p>
  <div class="operation-container">
    <div class="operation operation-get">
      <div class="method method-get">GET</div>
      <div class="path">/dishes/{dish_id}</div>
      <div class="summary">View a dish's details</div>
      <div class="right-icons">
        <div class="auth-btn-container locked">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 20 20"
            class="locked"
            width="20"
            height="20"
            aria-hidden="true"
            focusable="false"
          >
            <path
              d="M15.8 8H14V5.6C14 2.703 12.665 1 10 1 7.334 1 6 2.703 6 5.6V8H4c-.553 0-1 .646-1 1.199V17c0 .549.428 1.139.951 1.307l1.197.387C5.672 18.861 6.55 19 7.1 19h5.8c.549 0 1.428-.139 1.951-.307l1.196-.387c.524-.167.953-.757.953-1.306V9.199C17 8.646 16.352 8 15.8 8zM12 8H8V5.199C8 3.754 8.797 3 10 3c1.203 0 2 .754 2 2.199V8z"
            ></path>
          </svg>
        </div>

        <div class="op-block-arrow-container">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 20 20"
            class="arrow"
            width="20"
            height="20"
            aria-hidden="true"
            focusable="false"
          >
            <path
              d="M17.418 6.109c.272-.268.709-.268.979 0s.271.701 0 .969l-7.908 7.83c-.27.268-.707.268-.979 0l-7.908-7.83c-.27-.268-.27-.701 0-.969.271-.268.709-.268.979 0L10 13.25l7.418-7.141z"
            ></path>
          </svg>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="fragment fade-in-then-out">
  <p>
    The API client sends an HTTP request, filtering the response to only the
    fields it needs to display on the dish's details page.
  </p>
  <pre><code class="language-shell preline-code">curl -X 'GET' \
'http://localhost:8080/dishes/:id?fields=name|description|price|image_name|ingredients' \
-H 'accept: application/json'</code></pre>
</div>

<div class="fragment fade-in-then-out">
  <p>
    The server responds with an <code>200 OK</code> status code with the
    response body containing the dish details:
  </p>
  <pre><code class="language-json">{
    "name": "Bruschetta al Pomodoro",
    "description": "Toasted bread topped with a mixture of ripe tomatoes, garlic, basil, and olive oil.",
    "price": 7999,
    "image_name": "bruschetta_al_pomodoro",
    "ingredients": [
        {
            "ingredient_id": "66d6e3749d60891abff847f2",
            "is_essential": false,
            "_id": "66d6e3749d60891abff84816"
        },
        {
            "ingredient_id": "66d6e3749d60891abff847e5",
            "is_essential": false,
            "_id": "66d6e3749d60891abff84817"
        }
    ]
}</code></pre>
</div>

<div class="fragment fade-in-then-out">
  <p>
    The API client now has the data it needs to populate the dish details page.
  </p>
</div>

<div class="fragment fade-in-then-out">
  <h5>Adding dishes and viewing the bill</h5>

  <p>
    If the user likes the dish, they can add it to their order. The API client
    keeps track of the dishes that the user orders.
  </p>
</div>

<div class="fragment fade-in-then-out">
  <p>
    When the user views the bill, the client can retrieve each dish's details
    from local storage.
  </p>
</div>

<div class="fragment fade-in-then-out">
  <h5>Place order</h5>

  <p>
    When the user has selected all the dishes they wish to order, they can place
    the order.
  </p>
</div>

<div class="fragment fade-in-then-out">
  <p>Prior to sending the order, the application asks for their first name.</p>
</div>

<div class="fragment fade-in-then-out">
  <p>The patron can also add any special requests in a free-form text field.</p>
</div>

<div class="fragment fade-in-then-out">
  <p>
    The API client app needs to place the order using the following endpoint:
  </p>
  <div class="operation-container">
    <div class="operation operation-post">
      <div class="method method-post">POST</div>
      <div class="path">/orders</div>
      <div class="summary">Place an order</div>
      <div class="right-icons">
        <div class="auth-btn-container locked">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 20 20"
            class="locked"
            width="20"
            height="20"
            aria-hidden="true"
            focusable="false"
          >
            <path
              d="M15.8 8H14V5.6C14 2.703 12.665 1 10 1 7.334 1 6 2.703 6 5.6V8H4c-.553 0-1 .646-1 1.199V17c0 .549.428 1.139.951 1.307l1.197.387C5.672 18.861 6.55 19 7.1 19h5.8c.549 0 1.428-.139 1.951-.307l1.196-.387c.524-.167.953-.757.953-1.306V9.199C17 8.646 16.352 8 15.8 8zM12 8H8V5.199C8 3.754 8.797 3 10 3c1.203 0 2 .754 2 2.199V8z"
            ></path>
          </svg>
        </div>

        <div class="op-block-arrow-container">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 20 20"
            class="arrow"
            width="20"
            height="20"
            aria-hidden="true"
            focusable="false"
          >
            <path
              d="M17.418 6.109c.272-.268.709-.268.979 0s.271.701 0 .969l-7.908 7.83c-.27.268-.707.268-.979 0l-7.908-7.83c-.27-.268-.27-.701 0-.969.271-.268.709-.268.979 0L10 13.25l7.418-7.141z"
            ></path>
          </svg>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="fragment fade-in-then-out">
  <p>
    The API client app sends an HTTP request, retrieving the patron's name and
    dish selections from local storage and including them in the request body:
  </p>

  <pre><code class="language-shell">curl -X 'POST' \
'http://localhost:8080/orders' \
-H 'accept: application/json' \
-H 'Content-Type: application/json' \
-d '{
    "dish_ids": [
    "66d6e3749d60891abff84815",
    "66d6e3749d60891abff8481c",
    "66d6e3749d60891abff84820"
  ],
  "given_name": "John",
  "table_number": 18
  "special_requests": "No peanuts."
}'</code></pre>
</div>

<div class="fragment fade-in-then-out">
  <p>
    The server responds with a <code>201 Created</code> status code with the
    response body containing several new pieces of information.
  </p>
  <pre><code class="language-json" data-line-numbers="5-7">{
    "id": "66e2d159ea5ad311fdfc55a3",
    "created_at": "2024-09-12T11:32:41.440Z",
    "updated_at": "2024-09-12T11:32:41.440Z",
    "scheduled_at": null,
    "table_number": 18,
    "status": "received",
    "priority": 3,
    "dish_ids": [
        "66d6e3749d60891abff84815",
        "66d6e3749d60891abff8481c",
        "66d6e3749d60891abff84820"
    ]
}</code></pre>
</div>

<div class="fragment fade-in-then-out">
  <p>The note-worthy fields are:</p>

  <table style="font-size: 30px">
    <tr>
      <td><b>Field</b></td>
      <td><b>Description</b></td>
    </tr>
    <tr>
      <td><code>tabke_number</code></td>
      <td>
        For dine-in, patrons use placards for food runners. For takeaway, the
        number appears on a pickup screen with real-time updates.
      </td>
    </tr>
    <tr>
      <td><code>status</code></td>
      <td>
        <code>received</code> indicates the staff has received the order and
        will start preparation.
      </td>
    </tr>
    <tr>
      <td><code>priority</code></td>
      <td>The initial priority is set to <code>3</code> (medium).</td>
    </tr>
  </table>
</div>

<div class="fragment fade-in-then-out">
  <h5>Order confirmation</h5>
  <p>
    Once the user places an order, the patron receives confirmation and the
    order details are sent the restaurant staff to begin preparing the order.
  </p>
</div>

<div class="fragment fade-in-then-out">
  <h3>The staff API flow</h3>
</div>

<div class="fragment fade-in-then-out">
  <p>Let's translate the restaurant staff's user journey to an API flow.</p>
</div>
<div class="fragment fade-in-then-out">
  <h5>Order display</h5>
  <p>
    After the patron places an order, the order apepars on the expeditor's KDS.
  </p>
</div>

<div class="fragment fade-in-then-out">
  <h5></h5>
  <p>The API client app needs fetch orders following endpoint:</p>

  <div class="operation-container">
    <div class="operation operation-get">
      <div class="method method-get">GET</div>
      <div class="path">/orders</div>
      <div class="summary">Get a list of orders</div>
      <div class="right-icons">
        <div class="auth-btn-container locked">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 20 20"
            class="locked"
            width="20"
            height="20"
            aria-hidden="true"
            focusable="false"
          >
            <path
              d="M15.8 8H14V5.6C14 2.703 12.665 1 10 1 7.334 1 6 2.703 6 5.6V8H4c-.553 0-1 .646-1 1.199V17c0 .549.428 1.139.951 1.307l1.197.387C5.672 18.861 6.55 19 7.1 19h5.8c.549 0 1.428-.139 1.951-.307l1.196-.387c.524-.167.953-.757.953-1.306V9.199C17 8.646 16.352 8 15.8 8zM12 8H8V5.199C8 3.754 8.797 3 10 3c1.203 0 2 .754 2 2.199V8z"
            ></path>
          </svg>
        </div>

        <div class="op-block-arrow-container">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 20 20"
            class="arrow"
            width="20"
            height="20"
            aria-hidden="true"
            focusable="false"
          >
            <path
              d="M17.418 6.109c.272-.268.709-.268.979 0s.271.701 0 .969l-7.908 7.83c-.27.268-.707.268-.979 0l-7.908-7.83c-.27-.268-.27-.701 0-.969.271-.268.709-.268.979 0L10 13.25l7.418-7.141z"
            ></path>
          </svg>
        </div>
      </div>
    </div>
  </div>
</div>

The API client app needs to fetch all new orders on the current day using the
following endpoint:

<div class="fragment fade-in-then-out">
  <p>At this stage, the expeditor is only interested in seeing new orders.</p>
  <p>
    The query string looks something like:
    <code>?filter=created_at.gte~2024-07-02</code>
  </p>
</div>

<div class="fragment fade-in-then-out">
  <p>
    They only need to see orders with a status of
    <code>received</code>.
  </p>
  <p>
    The query string looks something like:
    <code>?filter=status.eq~Received</code>
  </p>
</div>

<div class="fragment fade-in-then-out">
  <p>They only need to see certain fields in the response.</p>
  <p>
    The query string looks something like:
    <code>?fields=table|priority|dish_ids</code>
  </p>
</div>
<div class="fragment fade-in-then-out">
  <p>
    Combining the two filters results in the following query string:
    <code
      >?filter=created_at.gte~2024-07-02|status.eq~Received&fields=table|priority|dish_ids</code
    >
  </p>
</div>

<div class="fragment fade-in-then-out">
  <p>
    The API client sends an HTTP request to filter the response, including only
    the orders with a status of
    <code>received</code> that were placed on the current day:
  </p>

  <pre><code class="language-shell preline-code">curl -X 'GET' \
'http://localhost:8080/orders?fields=table_number,priority,dish_ids&select=created_at.gte:2024-05-07,status.eq:received' \
-H 'accept: application/json'
      </code></pre>
</div>
<div class="fragment fade-in-then-out">
  <p>
    The server returns a <code>200 OK</code> status code with the response body
    containing new orders:
  </p>
  <pre><code class="language-json">{
    "results": [
        {
            "id": "66d985d43134621c2223e521",
            "priority": 3,
            "dish_ids": [
                "66d6e3749d60891abff84815",
                "66d6e3749d60891abff8481c"
            ]
        },
    ],
    "total_results": 5
}</code></pre>
</div>

<div class="fragment fade-in-then-out">
  <p>The API client can now display the list of new orders to the expeditor.</p>
</div>
<div class="fragment fade-in-then-out">
  <h5>Prioritization</h5>
  <p>The expeditor can adjust the priority of the order.</p>
</div>

<div class="fragment fade-in-then-out">
  <h5></h5>
  <p>
    By default, orders are set to priority 3. The expeditor may increase the
    priority for orders that require immediate attention.
  </p>
</div>

<div class="fragment fade-in-then-out">
  <p>
    To help decide which orders should be prioritized, the expeditor can view
    the preparation time for the dishes in the order.
  </p>
</div>

<div class="fragment fade-in-then-out">
  <p>
    To help decide which orders should be prioritized, the expeditor can view
    the preparation time for the dishes in the order.
  </p>
</div>

<div class="fragment fade-in-then-out">
  <p>
    To do so, the API client retrieves the `preparation_time` for each dish in
    the order using teh following endpoint:
  </p>

  <div class="operation-container">
    <div class="operation operation-put">
      <div class="method method-get">GET</div>
      <div class="path">/dishes/{id}</div>
      <div class="summary">Get a dish's details</div>
      <div class="right-icons">
        <div class="auth-btn-container locked">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 20 20"
            class="locked"
            width="20"
            height="20"
            aria-hidden="true"
            focusable="false"
          >
            <path
              d="M15.8 8H14V5.6C14 2.703 12.665 1 10 1 7.334 1 6 2.703 6 5.6V8H4c-.553 0-1 .646-1 1.199V17c0 .549.428 1.139.951 1.307l1.197.387C5.672 18.861 6.55 19 7.1 19h5.8c.549 0 1.428-.139 1.951-.307l1.196-.387c.524-.167.953-.757.953-1.306V9.199C17 8.646 16.352 8 15.8 8zM12 8H8V5.199C8 3.754 8.797 3 10 3c1.203 0 2 .754 2 2.199V8z"
            ></path>
          </svg>
        </div>

        <div class="op-block-arrow-container">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 20 20"
            class="arrow"
            width="20"
            height="20"
            aria-hidden="true"
            focusable="false"
          >
            <path
              d="M17.418 6.109c.272-.268.709-.268.979 0s.271.701 0 .969l-7.908 7.83c-.27.268-.707.268-.979 0l-7.908-7.83c-.27-.268-.27-.701 0-.969.271-.268.709-.268.979 0L10 13.25l7.418-7.141z"
            ></path>
          </svg>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="fragment fade-in-then-out">
  <p>
    The API client sends an HTTP request, filtering the response to only include
    the prepartion time.
  </p>
  <pre><code class="language-shell preline-code">curl -X 'GET' \
  'http://localhost:8080/dishes/66d6e3749d60891abff84815?fields=preparation_time'\ 
  -H 'accept: application/json'
        </code></pre>
</div>

<div class="fragment fade-in-then-out">
  <p>
    To allow the expeditor to change a dish's priority, the API client needs to
    use the following endpoint:
  </p>
  <div class="operation-container">
    <div class="operation operation-put">
      <div class="method method-put">PUT</div>
      <div class="path">/orders/{order_id}</div>
      <div class="summary">Update an order</div>
      <div class="right-icons">
        <div class="auth-btn-container locked">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 20 20"
            class="locked"
            width="20"
            height="20"
            aria-hidden="true"
            focusable="false"
          >
            <path
              d="M15.8 8H14V5.6C14 2.703 12.665 1 10 1 7.334 1 6 2.703 6 5.6V8H4c-.553 0-1 .646-1 1.199V17c0 .549.428 1.139.951 1.307l1.197.387C5.672 18.861 6.55 19 7.1 19h5.8c.549 0 1.428-.139 1.951-.307l1.196-.387c.524-.167.953-.757.953-1.306V9.199C17 8.646 16.352 8 15.8 8zM12 8H8V5.199C8 3.754 8.797 3 10 3c1.203 0 2 .754 2 2.199V8z"
            ></path>
          </svg>
        </div>

        <div class="op-block-arrow-container">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 20 20"
            class="arrow"
            width="20"
            height="20"
            aria-hidden="true"
            focusable="false"
          >
            <path
              d="M17.418 6.109c.272-.268.709-.268.979 0s.271.701 0 .969l-7.908 7.83c-.27.268-.707.268-.979 0l-7.908-7.83c-.27-.268-.27-.701 0-.969.271-.268.709-.268.979 0L10 13.25l7.418-7.141z"
            ></path>
          </svg>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="fragment fade-in-then-out">
  <p>
    Based on the preparation times, the expeditor has decided on which orders
    should take precedence.
  </p>
</div>

<div class="fragment fade-in-then-out">
  <p>
    The API client sends an HTTP request, updating the priority of the order
    from
    <code>3</code> to <code>1</code> so it takes precedence.
  </p>
  <pre><code class="language-json" data-line-numbers="3">{
    "dish_ids": [
      "66d5755c8ee227f19183cdcb"
    ],
    "priority": 1,
    "status": "Received"
  }</code></pre>
</div>

<div class="fragment fade-in-then-out">
  <p>
    The server responds with a <code>200 OK</code> status code with the response
    body containing the updated resource.
  </p>
</div>

<div class="fragment fade-in-then-out">
  <h5>Initiating Preparation</h5>
  <p>
    Now that a dish is prioritized, the expeditor can initiate the preparation
    of the order by setting the order status to "In Progress".
  </p>
</div>
<div class="fragment fade-in-then-out">
  <p>To do this, the client needs to send a request to the same endpoint:</p>
  <div class="operation-container">
    <div class="operation operation-put">
      <div class="method method-put">PUT</div>
      <div class="path">/orders/{order_id}</div>
      <div class="summary">Update an order</div>
      <div class="right-icons">
        <div class="auth-btn-container locked">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 20 20"
            class="locked"
            width="20"
            height="20"
            aria-hidden="true"
            focusable="false"
          >
            <path
              d="M15.8 8H14V5.6C14 2.703 12.665 1 10 1 7.334 1 6 2.703 6 5.6V8H4c-.553 0-1 .646-1 1.199V17c0 .549.428 1.139.951 1.307l1.197.387C5.672 18.861 6.55 19 7.1 19h5.8c.549 0 1.428-.139 1.951-.307l1.196-.387c.524-.167.953-.757.953-1.306V9.199C17 8.646 16.352 8 15.8 8zM12 8H8V5.199C8 3.754 8.797 3 10 3c1.203 0 2 .754 2 2.199V8z"
            ></path>
          </svg>
        </div>

        <div class="op-block-arrow-container">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 20 20"
            class="arrow"
            width="20"
            height="20"
            aria-hidden="true"
            focusable="false"
          >
            <path
              d="M17.418 6.109c.272-.268.709-.268.979 0s.271.701 0 .969l-7.908 7.83c-.27.268-.707.268-.979 0l-7.908-7.83c-.27-.268-.27-.701 0-.969.271-.268.709-.268.979 0L10 13.25l7.418-7.141z"
            ></path>
          </svg>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="fragment fade-in-then-out">
  <p>
    The API client sends an HTTP request, updating the
    <code>status</code> of the order from <code>Received</code> to
    <code>In Progress</code>:
  </p>
  <pre><code class="language-json" data-line-numbers="2">{
    "dish_ids": [
      "66d5755c8ee227f19183cdcb"
    ],
    "priority": 1,
    "status": "In Progress"
  }</code></pre>
</div>

<div class="fragment fade-in-then-out">
  <p>
    The server responds with a <code>200 OK</code> status code with the response
    body containing the updated resource.
  </p>
</div>

<div class="fragment fade-in-then-out">
  <h5>Order preparation by stations</h5>
  <p>
    Each dish in the order is assigned to a specific station (e.g., cold, hot,
    beverages).
  </p>
</div>
<div class="fragment fade-in-then-out">
  <h5></h5>
  <p>
    Stations responsible for each dish see their respective parts of the order
    on their KDS.
  </p>
</div>
<div class="fragment fade-in-then-out">
  <p>
    To do this, the client needs to use the following endpoint to view an
    order's dishes:
  </p>

  <div class="operation-container">
    <div class="operation operation-get">
      <div class="method method-get">GET</div>
      <div class="path">/orders/{order_id}/dishes</div>
      <div class="summary">View an order's dishes</div>
      <div class="right-icons">
        <div class="auth-btn-container locked">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 20 20"
            class="locked"
            width="20"
            height="20"
            aria-hidden="true"
            focusable="false"
          >
            <path
              d="M15.8 8H14V5.6C14 2.703 12.665 1 10 1 7.334 1 6 2.703 6 5.6V8H4c-.553 0-1 .646-1 1.199V17c0 .549.428 1.139.951 1.307l1.197.387C5.672 18.861 6.55 19 7.1 19h5.8c.549 0 1.428-.139 1.951-.307l1.196-.387c.524-.167.953-.757.953-1.306V9.199C17 8.646 16.352 8 15.8 8zM12 8H8V5.199C8 3.754 8.797 3 10 3c1.203 0 2 .754 2 2.199V8z"
            ></path>
          </svg>
        </div>

        <div class="op-block-arrow-container">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 20 20"
            class="arrow"
            width="20"
            height="20"
            aria-hidden="true"
            focusable="false"
          >
            <path
              d="M17.418 6.109c.272-.268.709-.268.979 0s.271.701 0 .969l-7.908 7.83c-.27.268-.707.268-.979 0l-7.908-7.83c-.27-.268-.27-.701 0-.969.271-.268.709-.268.979 0L10 13.25l7.418-7.141z"
            ></path>
          </svg>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="fragment fade-in-then-out">
  <p>
    The API clients sends an HTTP request, filtering the response to only
    include dishes belonging to a specific
    <code>station</code>:
  </p>

  <pre><code class="language-shell preline-code">curl -X 'GET' \
'http://localhost:8080/orders/66294b2a4475a41f3e709bcb/dishes?fields=name|ingredients|image_name&filter=station.eq~hot'\ 
-H 'accept: application/json'
      </code></pre>
</div>

<div class="fragment fade-in-then-out">
  <p>
    The server returns a <code>200 OK</code> status code with the response body
    containing all dishes belonging to the station.
  </p>
  <pre><code class="language-shell">{
    "results": [
        {
            "id": "66d6e3749d60891abff8481c",
            "name": "Arancini di Riso",
            "image_name": "arancini_di_riso",
            "ingredients": [
                {
                    "ingredient_id": "66d6e3749d60891abff847e1",
                    "is_essential": false,
                    "_id": "66d6e3749d60891abff8481d"
                },
                {
                    "ingredient_id": "66d6e3749d60891abff8480f",
                    "is_essential": true,
                    "_id": "66d6e3749d60891abff8481e"
                },
            ]
        }
    ],
    "total_results": 5
}
      </code></pre>
</div>

<div class="fragment fade-in-then-out">
  <p>The API client stores the dish IDs to local storage for the next step.</p>
</div>

<div class="fragment fade-in-then-out">
  <h5>Display dish ingredients in station KDS</h5>
  <p>
    When staff begins reparing dishes at their station, they need to know each
    dish's ingredients.
  </p>
</div>
<div class="fragment fade-in-then-out">
  <p>
    To display a dish's ingredients, the client needs to use the following
    endpoint:
  </p>

  <div class="operation-container">
    <div class="operation operation-get">
      <div class="method method-get">GET</div>
      <div class="path">/dishes/{dish_id}/ingredients</div>
      <div class="summary">Get a dish's ingredients</div>
      <div class="right-icons">
        <div class="auth-btn-container locked">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 20 20"
            class="locked"
            width="20"
            height="20"
            aria-hidden="true"
            focusable="false"
          >
            <path
              d="M15.8 8H14V5.6C14 2.703 12.665 1 10 1 7.334 1 6 2.703 6 5.6V8H4c-.553 0-1 .646-1 1.199V17c0 .549.428 1.139.951 1.307l1.197.387C5.672 18.861 6.55 19 7.1 19h5.8c.549 0 1.428-.139 1.951-.307l1.196-.387c.524-.167.953-.757.953-1.306V9.199C17 8.646 16.352 8 15.8 8zM12 8H8V5.199C8 3.754 8.797 3 10 3c1.203 0 2 .754 2 2.199V8z"
            ></path>
          </svg>
        </div>

        <div class="op-block-arrow-container">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 20 20"
            class="arrow"
            width="20"
            height="20"
            aria-hidden="true"
            focusable="false"
          >
            <path
              d="M17.418 6.109c.272-.268.709-.268.979 0s.271.701 0 .969l-7.908 7.83c-.27.268-.707.268-.979 0l-7.908-7.83c-.27-.268-.27-.701 0-.969.271-.268.709-.268.979 0L10 13.25l7.418-7.141z"
            ></path>
          </svg>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="fragment fade-in-then-out">
  <h5></h5>
  <p>
    The API client references previously saved dish IDs and sends an HTTP
    request for each:
  </p>

  <pre><code class="language-shell preline-code">curl -X 'GET' \
'http://localhost:8080/dishes/66294b2a4475a41f3e709bd2/ingredients?fields=name' \
-H 'accept: application/json'
      </code></pre>
</div>
<div class="fragment fade-in-then-out">
  <p>
    The server responds with a <code>200 OK</code> status code with the response
    body containing a list of a dish's ingredients:
  </p>

  <pre><code class="language-json">{
    "results": [
        {
            "id": "66d6e3749d60891abff847ed",
            "name": "Eggplant"
        },
        {
            "id": "66d6e3749d60891abff847f9",
            "name": "Red Wine"
        },
        {
            "id": "66d6e3749d60891abff847fb",
            "name": "Saffron"
        },
        {
            "id": "66d6e3749d60891abff8480c",
            "name": "Tomato"
        }
    ],
    "total_results": 4
}     </code></pre>
</div>
<div class="fragment fade-in-then-out">
  <p>
    The API client can now display the list of ingredients required to create a
    dish.
  </p>
</div>
<div class="fragment fade-in-then-out">
  <h5>Ready for assembly</h5>
  <p>
    When a station completes preparation of their part of the order, they mark
    it as "Ready for Assembly" on their KDS.
  </p>
</div>
<div class="fragment fade-in-then-out">
  <p>
    The expeditor is notified when all stations have marked their parts as
    ready.
  </p>
</div>
<div class="fragment fade-in-then-out">
  <h5></h5>
  <p>
    This process is managed within the API client's logic rather than within the
    API.
  </p>
</div>
<div class="fragment fade-in-then-out">
  <h5>Order assembly</h5>
  <p>The expeditor assembles the parts of the order from different stations.</p>
</div>
<div class="fragment fade-in-then-out">
  <h5></h5>
  <p>
    After assembling the order, the expeditor updates the status to show it's
    ready for delivery to the patron.
  </p>
</div>
<div class="fragment fade-in-then-out">
  <h5></h5>
  <p>
    The API client sends a request to update the order status using this
    endpoint:
  </p>
  <div class="operation-container">
    <div class="operation operation-put">
      <div class="method method-put">PUT</div>
      <div class="path">/orders/{order_id}</div>
      <div class="summary">Update an order</div>
      <div class="right-icons">
        <div class="auth-btn-container locked">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 20 20"
            class="locked"
            width="20"
            height="20"
            aria-hidden="true"
            focusable="false"
          >
            <path
              d="M15.8 8H14V5.6C14 2.703 12.665 1 10 1 7.334 1 6 2.703 6 5.6V8H4c-.553 0-1 .646-1 1.199V17c0 .549.428 1.139.951 1.307l1.197.387C5.672 18.861 6.55 19 7.1 19h5.8c.549 0 1.428-.139 1.951-.307l1.196-.387c.524-.167.953-.757.953-1.306V9.199C17 8.646 16.352 8 15.8 8zM12 8H8V5.199C8 3.754 8.797 3 10 3c1.203 0 2 .754 2 2.199V8z"
            ></path>
          </svg>
        </div>

        <div class="op-block-arrow-container">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 20 20"
            class="arrow"
            width="20"
            height="20"
            aria-hidden="true"
            focusable="false"
          >
            <path
              d="M17.418 6.109c.272-.268.709-.268.979 0s.271.701 0 .969l-7.908 7.83c-.27.268-.707.268-.979 0l-7.908-7.83c-.27-.268-.27-.701 0-.969.271-.268.709-.268.979 0L10 13.25l7.418-7.141z"
            ></path>
          </svg>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="fragment fade-in-then-out">
  <p>
    For table-side ordering, the client sends an HTTP request, updating the
    <code>status</code> of the order from <code>In Progress</code> to
    <code>On the Way</code>:
  </p>

  <pre><code class="language-shell">curl -X 'PUT' \
'http://localhost:8080/orders/66294b2a4475a41f3e709bcd' \
-H 'accept: */*' \
-H 'Content-Type: application/json' \
-d '{
    "dish_ids": [
      "5fb3d21df15a6a415082a399",
      "60c5fe768f23023ab2f2f888",
      "612d63dc4bb92b001e313725"
    ],
    "priority": 3,
    "status": "On the Way"
  }'
</code></pre>
</div>

<div class="fragment fade-in-then-out">
  <p>
    The server responds with a <code>200 OK</code> status code with the response
    body containing the updated resource.
  </p>
</div>

<div class="fragment fade-in-then-out">
  <p>
    For takeaway orders, the expeditor changes the status to
    <code>Ready for Pickup</code> to indicate the order is ready for the patron.
  </p>
</div>

<div class="fragment fade-in-then-out">
  <p>Staff can also place orders, such as when a patron calls in.</p>
</div>
<div class="fragment fade-in-then-out">
  <p>
    For catering or scheduled orders, staff can set a 'Scheduled At' datetime
    for when the order should be prepared.
  </p>
</div>

<div class="fragment fade-in-then-out">
  <h5></h5>
  <p>
    The API client sends a request to place the order using the standard
    endpoint:
  </p>
  <div class="operation-container">
    <div class="operation operation-put">
      <div class="method method-put">PUT</div>
      <div class="path">/orders/{order_id}</div>
      <div class="summary">Update an order</div>
      <div class="right-icons">
        <div class="auth-btn-container locked">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 20 20"
            class="locked"
            width="20"
            height="20"
            aria-hidden="true"
            focusable="false"
          >
            <path
              d="M15.8 8H14V5.6C14 2.703 12.665 1 10 1 7.334 1 6 2.703 6 5.6V8H4c-.553 0-1 .646-1 1.199V17c0 .549.428 1.139.951 1.307l1.197.387C5.672 18.861 6.55 19 7.1 19h5.8c.549 0 1.428-.139 1.951-.307l1.196-.387c.524-.167.953-.757.953-1.306V9.199C17 8.646 16.352 8 15.8 8zM12 8H8V5.199C8 3.754 8.797 3 10 3c1.203 0 2 .754 2 2.199V8z"
            ></path>
          </svg>
        </div>

        <div class="op-block-arrow-container">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 20 20"
            class="arrow"
            width="20"
            height="20"
            aria-hidden="true"
            focusable="false"
          >
            <path
              d="M17.418 6.109c.272-.268.709-.268.979 0s.271.701 0 .969l-7.908 7.83c-.27.268-.707.268-.979 0l-7.908-7.83c-.27-.268-.27-.701 0-.969.271-.268.709-.268.979 0L10 13.25l7.418-7.141z"
            ></path>
          </svg>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="fragment fade-in-then-out">
  <p>The API client sends an HTTP request, including the</p>

  <pre><code class="language-shell">curl -X 'POST' \
  'http://localhost:8080/orders' \
  -H 'accept: */*' \
  -H 'Content-Type: application/json' \
  -d '{
      "dish_ids": [
        "5fb3d21df15a6a415082a399",
        "60c5fe768f23023ab2f2f888",
        "612d63dc4bb92b001e313725"
      ],
      "priority": 3,
      "status": "On the Way"
      "scheduled_at": "2024-09-12T12:12:27.471Z"
    }'
  </code></pre>
</div>

<!-- HERE!!! -->

<div class="fragment fade-in-then-out">
  <h3>Detour: Authentication and authorization</h3>
</div>

<div class="fragment fade-in-then-out">
  <p>
    Before proceeding with the admin API flow, let's discuss the implementation
    of authentication and authorization in the course API.
  </p>
</div>
<div class="fragment fade-in-then-out">
  <h5>Unprotected endpoints</h5>
  <p>
    These endpoints do not require authorization, such as an access token or
    basic authentication using a username and password.
  </p>
</div>
<div class="fragment fade-in-then-out">
  <h5></h5>
  <p>
    They are primarily used by end-user applications, like food ordering apps,
    for non-sensitive operations such as retrieving a list of dishes.
  </p>
</div>
<div class="fragment fade-in-then-out">
  <p>
    An exception exists for placing orders (POST operation), which allows end
    users to submit orders without authentication.
  </p>
</div>
<div class="fragment fade-in-then-out">
  <h5>Protected endpoints</h5>
  <p>
    These endpoints are dedicated to administrative functions and necessitate
    admin-level access to perform CRUD operations (Create, Read, Update,
    Delete).
  </p>
</div>
<div class="fragment fade-in-then-out">
  <h5></h5>
  <p>Examples include creating ingredients, dishes, and menus.</p>
</div>
<div class="fragment fade-in-then-out">
  <h5></h5>
  <p>
    Admins authenticate via a separate admin application using username and
    password credentials to access these secure endpoints.
  </p>
</div>
<div class="fragment fade-in-then-out">
  <h5></h5>
  <p>In the Swagger UI, protected endpoints have a padlock icon</p>
  <p>
    The padlock is initially 'unlocked', indicating requests to the endpoint are
    currently unauthorized.
  </p>
  <div class="operation-container">
    <div class="operation operation-post">
      <div class="method method-post">POST</div>
      <div class="path">/menus</div>
      <div class="summary">Create a menu</div>
      <div class="right-icons">
        <div class="auth-btn-container unlocked">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 20 20"
            class="locked"
            width="20"
            height="20"
            aria-hidden="true"
            focusable="false"
          >
            <path
              d="M15.8 8H14V5.6C14 2.703 12.665 1 10 1 7.334 1 6 2.703 6 5.6V6h2v-.801C8 3.754 8.797 3 10 3c1.203 0 2 .754 2 2.199V8H4c-.553 0-1 .646-1 1.199V17c0 .549.428 1.139.951 1.307l1.197.387C5.672 18.861 6.55 19 7.1 19h5.8c.549 0 1.428-.139 1.951-.307l1.196-.387c.524-.167.953-.757.953-1.306V9.199C17 8.646 16.352 8 15.8 8z"
            ></path>
          </svg>
        </div>

        <div class="op-block-arrow-container">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 20 20"
            class="arrow"
            width="20"
            height="20"
            aria-hidden="true"
            focusable="false"
          >
            <path
              d="M17.418 6.109c.272-.268.709-.268.979 0s.271.701 0 .969l-7.908 7.83c-.27.268-.707.268-.979 0l-7.908-7.83c-.27-.268-.27-.701 0-.969.271-.268.709-.268.979 0L10 13.25l7.418-7.141z"
            ></path>
          </svg>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="fragment fade-in-then-out">
  <h5></h5>
  <p>To 'authorize' your HTTP request to the endpoint:</p>

  <ol>
    <li>Click the 'lock' icon.</li>
    <li>Enter a value (depends on the authorization type).</li>
    <li>Click <b>Authorize</b>.</li>
    <li>Click <b>Close</b>.</li>
  </ol>
</div>
<div class="fragment fade-in-then-out">
  <h5></h5>
  <p>
    The padlock icon becomes 'locked' to indicate HTTP requests to the endpoint
    will now be authorized.
  </p>

  <div class="operation-container">
    <div class="operation operation-post">
      <div class="method method-post">POST</div>
      <div class="path">/menus</div>
      <div class="summary">Create a menu</div>
      <div class="right-icons">
        <div class="auth-btn-container locked">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 20 20"
            class="locked"
            width="20"
            height="20"
            aria-hidden="true"
            focusable="false"
          >
            <path
              d="M15.8 8H14V5.6C14 2.703 12.665 1 10 1 7.334 1 6 2.703 6 5.6V8H4c-.553 0-1 .646-1 1.199V17c0 .549.428 1.139.951 1.307l1.197.387C5.672 18.861 6.55 19 7.1 19h5.8c.549 0 1.428-.139 1.951-.307l1.196-.387c.524-.167.953-.757.953-1.306V9.199C17 8.646 16.352 8 15.8 8zM12 8H8V5.199C8 3.754 8.797 3 10 3c1.203 0 2 .754 2 2.199V8z"
            ></path>
          </svg>
        </div>

        <div class="op-block-arrow-container">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 20 20"
            class="arrow"
            width="20"
            height="20"
            aria-hidden="true"
            focusable="false"
          >
            <path
              d="M17.418 6.109c.272-.268.709-.268.979 0s.271.701 0 .969l-7.908 7.83c-.27.268-.707.268-.979 0l-7.908-7.83c-.27-.268-.27-.701 0-.969.271-.268.709-.268.979 0L10 13.25l7.418-7.141z"
            ></path>
          </svg>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="fragment fade-in-then-out">
  <h5>The OAuth ROPC flow</h5>
  <p>
    For secure access to protected resources, the course API employs the OAuth
    Resource Owner Password Credentials (ROPC) Flow.
  </p>
</div>
<div class="fragment fade-in-then-out">
  <h5></h5>
  <p>
    This flow enables an application to exchange a user's username and password
    directly for an access token.
  </p>
</div>
<div class="fragment fade-in-then-out">
  <h5></h5>
  <p>
    This ensures robust security measures are in place for restricted resources.
  </p>
</div>
<div class="fragment fade-in-then-out">
  <h5></h5>
  <p>Let's breakdown of the ROPC flow steps.</p>
</div>
<div class="fragment fade-in-then-out">
  <p>
    <b> Client Authentication </b>
  </p>

  <p>
    The API client application authenticates itself to the authorization server
    using its client credentials (client ID and client secret).
  </p>
</div>
<div class="fragment fade-in-then-out">
  <p><b> User authentication </b></p>
  <p>
    The end-user provides their username and password directly to the client
    application.
  </p>
</div>
<div class="fragment fade-in-then-out">
  <p><b> Token request </b></p>
  <p>
    The API client application sends a token request to the authorization
    server's token endpoint, including the user's credentials, client
    credentials, and relevant parameters (grant type).
  </p>
</div>
<div class="fragment fade-in-then-out">
  <p><b> Token issuance </b></p>
  <p>
    The authorization server validates the provided credentials. Upon successful
    validation, it issues an access token directly to the client application.
  </p>
</div>
<div class="fragment fade-in-then-out">
  <p>
    In addition, the client receives a refresh token that it can use to refresh
    the access token.
  </p>
</div>
<div class="fragment fade-in-then-out">
  <p><b> Access token usage </b></p>
  <p>
    The API client application utilizes the access token to access protected
    resources on behalf of the user, ensuring secure and authorized
    interactions.
  </p>
</div>
<div class="fragment fade-in-then-out">
  <p>
    <b> ROPC sequence </b>
  </p>
  <p>Here's a sequence diagram for the ROPC flow:</p>
  <img data-src="images/ropc-flow.jpg" />
</div>
<div class="fragment fade-in-then-out">
  <h5>Use cases for the ROPC flow</h5>
  <p>The ROPC Flow is typically employed in scenarios where...</p>
</div>
<div class="fragment fade-in-then-out">
  <h5></h5>
  <ol>
    <li>
      <p>
        The API client application is owned and trusted by the service provider
        (first-party application).
      </p>
    </li>
  </ol>
</div>
<div class="fragment fade-in-then-out">
  <ol start="2">
    <li>
      <p>
        End-users are willing to directly provide their credentials to the
        client application.
      </p>
    </li>
  </ol>
</div>
<div class="fragment fade-in-then-out">
  <ol start="3">
    <li>
      <p>
        Continuous access to protected resources is required without frequent
        user consent.
      </p>
    </li>
  </ol>
</div>

<div class="fragment fade-in-then-out">
  <h3>The authentication API flow</h3>
</div>

<div class="fragment fade-in-then-out">
  <p>
    Now that we know how authentication/authorization works, let's chart the
    authentication API flow.
  </p>
</div>
<div class="fragment fade-in-then-out">
  <h5>Account creation</h5>
  <p>
    The user must create an application-specific account to access protected
    endpoints.
  </p>
</div>

<div class="fragment fade-in-then-out">
  <h5></h5>
  <p>
    The API client app must send an HTTP request to the following endpoint to
    create a user account using the form information submitted by the user.
  </p>

  <div class="operation-container">
    <div class="operation operation-post">
      <div class="method method-post">POST</div>
      <div class="path">/users</div>
      <div class="summary">Create a user account</div>
      <div class="right-icons">
        <div class="auth-btn-container locked">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 20 20"
            class="locked"
            width="20"
            height="20"
            aria-hidden="true"
            focusable="false"
          >
            <path
              d="M15.8 8H14V5.6C14 2.703 12.665 1 10 1 7.334 1 6 2.703 6 5.6V8H4c-.553 0-1 .646-1 1.199V17c0 .549.428 1.139.951 1.307l1.197.387C5.672 18.861 6.55 19 7.1 19h5.8c.549 0 1.428-.139 1.951-.307l1.196-.387c.524-.167.953-.757.953-1.306V9.199C17 8.646 16.352 8 15.8 8zM12 8H8V5.199C8 3.754 8.797 3 10 3c1.203 0 2 .754 2 2.199V8z"
            ></path>
          </svg>
        </div>

        <div class="op-block-arrow-container">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 20 20"
            class="arrow"
            width="20"
            height="20"
            aria-hidden="true"
            focusable="false"
          >
            <path
              d="M17.418 6.109c.272-.268.709-.268.979 0s.271.701 0 .969l-7.908 7.83c-.27.268-.707.268-.979 0l-7.908-7.83c-.27-.268-.27-.701 0-.969.271-.268.709-.268.979 0L10 13.25l7.418-7.141z"
            ></path>
          </svg>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="fragment fade-in-then-out">
  <p>
    The API client sends an HTTP request, including the user account details:
  </p>

  <pre><code class="langage-shell">curl -X 'POST' \
'http://localhost:8080/users' \
-H 'accept: application/json' \
-H 'Content-Type: application/json' \
-d '{
    "email": "jimcarrey@gmail.com",
    "password": "P@ssw0rd!",
    "role": "manager",
    "user_name": "jimcarrey"
  }'</code></pre>
</div>

<div class="fragment fade-in-then-out">
  <p>
    If successful, the server responds with a
    <code>201 Created</code> status code with the response body containing the
    new user resource:
  </p>
  <pre><code class="language-json">{
    "id": "66e2f348ea5ad311fdfc5630",
    "created_at": "2024-09-12T13:57:28.148Z",
    "updated_at": "2024-09-12T13:57:28.148Z",
    "user_name": "jimcarrey",
    "password": "P@ssw0rd!",
    "email": "jimcarrey@gmail.com",
    "role": "manager"
}</code></pre>
</div>

<div class="fragment fade-in-then-out">
  <p>
    In reality, the server would check if the user's email is linked to a group,
    such as an Active Directory group, granting administrative access. To
    simplify matters, the course API accepts any email.
  </p>
</div>
<div class="fragment fade-in-then-out">
  <p>To simplify matters, the course API accepts any email.</p>
</div>

<div class="fragment fade-in-then-out">
  <h5>Admin login</h5>
  <p>Next, the admin needs to log into the admin portal.</p>
</div>
<div class="fragment fade-in-then-out">
  <p>
    To send requests to admin endpoints, the client app requires an access
    token.
  </p>
</div>

<div class="fragment fade-in-then-out">
  <p>This is obtained by making a POST request to the following endpoint:</p>
  <div class="operation-container">
    <div class="operation operation-post">
      <div class="method method-post">POST</div>
      <div class="path">/auth/token</div>
      <div class="summary">Authenticate user and obtain a access token</div>
      <div class="right-icons">
        <div class="auth-btn-container locked">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 20 20"
            class="locked"
            width="20"
            height="20"
            aria-hidden="true"
            focusable="false"
          >
            <path
              d="M15.8 8H14V5.6C14 2.703 12.665 1 10 1 7.334 1 6 2.703 6 5.6V8H4c-.553 0-1 .646-1 1.199V17c0 .549.428 1.139.951 1.307l1.197.387C5.672 18.861 6.55 19 7.1 19h5.8c.549 0 1.428-.139 1.951-.307l1.196-.387c.524-.167.953-.757.953-1.306V9.199C17 8.646 16.352 8 15.8 8zM12 8H8V5.199C8 3.754 8.797 3 10 3c1.203 0 2 .754 2 2.199V8z"
            ></path>
          </svg>
        </div>

        <div class="op-block-arrow-container">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 20 20"
            class="arrow"
            width="20"
            height="20"
            aria-hidden="true"
            focusable="false"
          >
            <path
              d="M17.418 6.109c.272-.268.709-.268.979 0s.271.701 0 .969l-7.908 7.83c-.27.268-.707.268-.979 0l-7.908-7.83c-.27-.268-.27-.701 0-.969.271-.268.709-.268.979 0L10 13.25l7.418-7.141z"
            ></path>
          </svg>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="fragment fade-in-then-out">
  <p>
    The API client sends an HTTP request including a basic authorization header
    and the user's details:
  </p>
  <pre><code class="langage-shell">curl -X 'POST' \
'http://localhost:8080/auth/token' \
-H 'accept: application/json' \
-H 'Authorization: ••••••' \
-H 'Content-Type: application/json' \
-d '{
  "grant_type": "password",
  "password": "P@ssw0rd!",
  "user_name": "jimcarrey"
}'</code></pre>
</div>

<div class="fragment fade-in-then-out">
  <p>Let's look at the HTTP request closer.</p>
</div>

<div class="fragment fade-in-then-out">
  <p>
    The authorization header includes a base64-encoded client ID and client
    secret that the server uses to authenticate the client app.
  </p>

  <pre><code  data-line-numbers="4" class="langage-shell">curl -X 'POST' \
'http://localhost:8080/auth/token' \
-H 'accept: application/json' \
-H 'Authorization: ••••••' \
-H 'Content-Type: application/json' \
-d '{
    "grant_type": "password",
    "password": "P@ssw0rd!",
    "user_name": "jimcarrey"
  }'</code></pre>
</div>
<div class="fragment fade-in-then-out">
  <p>
    The <code>grant_type</code> field instructs the endpoint to perform the
    resource owner password credential flow.
  </p>
</div>

<div class="fragment fade-in-then-out">
  <p>
    Once authorized, the server will exchange the user's username and password
    for an access token.
  </p>
</div>

<div class="fragment fade-in-then-out">
  <p>
    If the request was successful, the server responds with a
    <code>201 Created</code> status code with the response body containing
    containing the access token, it's expiry datetime, and a refresh token.
  </p>
  <pre><code  data-line-numbers="4-6" class="langage-json">{
    "created_at": "2024-09-12T14:04:44.635Z",
    "updated_at": "2024-09-12T14:04:44.635Z",
    "access_token": "0edb435d-d75e-44c8-ae2d-5b7146db527e",
    "expires_at": "2024-09-12T14:34:44.635Z",
    "refresh_token": "9f753175-a65a-49d8-971f-62f9a8fad71f",
    "token_type": "Bearer",
    "user_name": "jimcarrey",
    "_id": "66e2f4fcea5ad311fdfc5634",
}
  </code></pre>
</div>

<div class="fragment fade-in-then-out">
  <p>Let's take a closer look at the response body.</p>
</div>

<div class="fragment fade-in-then-out">
  <p>
    The <code>access_token</code> is an opaque string UUID provided to the
    client for authentication purposes.
  </p>
  <pre><code  data-line-numbers="4" class="langage-json">{
    "created_at": "2024-09-12T14:04:44.635Z",
    "updated_at": "2024-09-12T14:04:44.635Z",
    "access_token": "0edb435d-d75e-44c8-ae2d-5b7146db527e",
    "expires_at": "2024-09-12T14:34:44.635Z",
    "refresh_token": "9f753175-a65a-49d8-971f-62f9a8fad71f",
    "token_type": "Bearer",
    "user_name": "jimcarrey",
    "_id": "66e2f4fcea5ad311fdfc5634",
}
  </code></pre>
</div>

<div class="fragment fade-in-then-out">
  <p>
    <code>expires_in</code> specifies the duration in seconds for which the
    access token remains valid. In this case, 300 seconds.
  </p>

  <pre><code  data-line-numbers="5" class="langage-json">{
    "created_at": "2024-09-12T14:04:44.635Z",
    "updated_at": "2024-09-12T14:04:44.635Z",
    "access_token": "0edb435d-d75e-44c8-ae2d-5b7146db527e",
    "expires_at": "2024-09-12T14:34:44.635Z",
    "refresh_token": "9f753175-a65a-49d8-971f-62f9a8fad71f",
    "token_type": "Bearer",
    "user_name": "jimcarrey",
    "_id": "66e2f4fcea5ad311fdfc5634",
}
  </code></pre>
</div>
<div class="fragment fade-in-then-out">
  <p>
    The API client can exchange the <code>refresh_token</code> for a new access
    token when the current one expires. Refresh tokens have a longer lifespan
    compared to access tokens.
  </p>
  <pre><code  data-line-numbers="6" class="langage-json">{
    "created_at": "2024-09-12T14:04:44.635Z",
    "updated_at": "2024-09-12T14:04:44.635Z",
    "access_token": "0edb435d-d75e-44c8-ae2d-5b7146db527e",
    "expires_at": "2024-09-12T14:34:44.635Z",
    "refresh_token": "9f753175-a65a-49d8-971f-62f9a8fad71f",
    "token_type": "Bearer",
    "user_name": "jimcarrey",
    "_id": "66e2f4fcea5ad311fdfc5634",
}
  </code></pre>
</div>

<div class="fragment fade-in-then-out">
  <p>
    <code>token_type</code> specifies how the access token is intended to be
    used. In this scenario, it should be included as a bearer token within the
    authorization header for protected requests.
  </p>

  <pre><code  data-line-numbers="7" class="langage-json">{
    "created_at": "2024-09-12T14:04:44.635Z",
    "updated_at": "2024-09-12T14:04:44.635Z",
    "access_token": "0edb435d-d75e-44c8-ae2d-5b7146db527e",
    "expires_at": "2024-09-12T14:34:44.635Z",
    "refresh_token": "9f753175-a65a-49d8-971f-62f9a8fad71f",
    "token_type": "Bearer",
    "user_name": "jimcarrey",
    "_id": "66e2f4fcea5ad311fdfc5634",
}
  </code></pre>
</div>
<div class="fragment fade-in-then-out">
  <h5>Refreshing the access token</h5>
  <p>
    After a client sends an HTTP request to a protected endpoint, the server may
    return a 401 Unauthorized status code, indicating the expired access token.
  </p>
</div>

<div class="fragment fade-in-then-out">
  <p>
    To refresh the access token, the client needs to send an HTTP request to the
    following endpoint:
  </p>

  <div class="operation-container">
    <div class="operation operation-post">
      <div class="method method-post">POST</div>
      <div class="path">/auth/refresh-token</div>
      <div class="summary">Refresh access token</div>
      <div class="right-icons">
        <div class="auth-btn-container locked">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 20 20"
            class="locked"
            width="20"
            height="20"
            aria-hidden="true"
            focusable="false"
          >
            <path
              d="M15.8 8H14V5.6C14 2.703 12.665 1 10 1 7.334 1 6 2.703 6 5.6V8H4c-.553 0-1 .646-1 1.199V17c0 .549.428 1.139.951 1.307l1.197.387C5.672 18.861 6.55 19 7.1 19h5.8c.549 0 1.428-.139 1.951-.307l1.196-.387c.524-.167.953-.757.953-1.306V9.199C17 8.646 16.352 8 15.8 8zM12 8H8V5.199C8 3.754 8.797 3 10 3c1.203 0 2 .754 2 2.199V8z"
            ></path>
          </svg>
        </div>

        <div class="op-block-arrow-container">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 20 20"
            class="arrow"
            width="20"
            height="20"
            aria-hidden="true"
            focusable="false"
          >
            <path
              d="M17.418 6.109c.272-.268.709-.268.979 0s.271.701 0 .969l-7.908 7.83c-.27.268-.707.268-.979 0l-7.908-7.83c-.27-.268-.27-.701 0-.969.271-.268.709-.268.979 0L10 13.25l7.418-7.141z"
            ></path>
          </svg>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="fragment fade-in-then-out">
  <p>
    The API client sends an HTTP request, this time including the refresh token
    in the request body:
  </p>

  <pre><code class="language-shell">curl -X 'POST' \
'http://localhost:8080/auth/refresh-token' \
-H 'accept: application/json' \
-d '{
    "refresh_token": "e74ed59d-6117-44fa-97d7-17fbda92e869"
  }'</code></pre>
</div>

<div class="fragment fade-in-then-out">
  <p>
    If the request was successful, the server responds with a
    <code>201 Created</code> status code with the response body containing a new
    access and refresh token.
  </p>
  <pre><code class="language-json">{
    "created_at": "2024-09-12T12:11:19.152Z",
    "updated_at": "2024-09-12T12:11:19.153Z",
    "access_token": "d119eec2-6d63-4f55-b319-949695256371",
    "expires_at": "2024-09-12T12:41:19.153Z",
    "refresh_token": "32717991-884d-4a30-bd84-b4cb29c85f44",
    "token_type": "Bearer",
    "user_name": "jimcarrey",
}</code></pre>
</div>

<div class="fragment fade-in-then-out">
  <p>
    The API client updates the access and refresh tokens locally so they can be
    easily retrieved.
  </p>
</div>
<div class="fragment fade-in-then-out">
  <p>
    The API client resumes including the access token in HTTP requests to
    protected endpoints.
  </p>
</div>

<div class="fragment fade-in-then-out">
  <h3>The admin API flow</h3>
</div>

<div class="fragment fade-in-then-out">
  <h5></h5>
  <p>
    Admins can manage ingredients, dishes, categories, and menus within the
    admin application
  </p>
</div>

<div class="fragment fade-in-then-out">
  <h5>Admin login</h5>
  <p>
    The API flow starts with the admin logging in to access admin functions.
  </p>
</div>

<div class="fragment fade-in-then-out">
  <p>This is achieved by making an HTTP request to the following endpoint:</p>

  <div class="operation-container">
    <div class="operation operation-post">
      <div class="method method-post">POST</div>
      <div class="path">/auth/token</div>
      <div class="summary">Authenticate user and obtain a access token</div>
      <div class="right-icons">
        <div class="auth-btn-container locked">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 20 20"
            class="locked"
            width="20"
            height="20"
            aria-hidden="true"
            focusable="false"
          >
            <path
              d="M15.8 8H14V5.6C14 2.703 12.665 1 10 1 7.334 1 6 2.703 6 5.6V8H4c-.553 0-1 .646-1 1.199V17c0 .549.428 1.139.951 1.307l1.197.387C5.672 18.861 6.55 19 7.1 19h5.8c.549 0 1.428-.139 1.951-.307l1.196-.387c.524-.167.953-.757.953-1.306V9.199C17 8.646 16.352 8 15.8 8zM12 8H8V5.199C8 3.754 8.797 3 10 3c1.203 0 2 .754 2 2.199V8z"
            ></path>
          </svg>
        </div>

        <div class="op-block-arrow-container">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 20 20"
            class="arrow"
            width="20"
            height="20"
            aria-hidden="true"
            focusable="false"
          >
            <path
              d="M17.418 6.109c.272-.268.709-.268.979 0s.271.701 0 .969l-7.908 7.83c-.27.268-.707.268-.979 0l-7.908-7.83c-.27-.268-.27-.701 0-.969.271-.268.709-.268.979 0L10 13.25l7.418-7.141z"
            ></path>
          </svg>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="fragment fade-in-then-out">
  <p>
    The API client sends an HTTP request, exchanging the admim's username and
    password for an access token:
  </p>

  <pre><code class="langage-shell">curl -X 'POST' \
'http://localhost:8080/auth/token' \
-H 'accept: application/json' \
-H 'Content-Type: application/json' \
-d '{
    "grant_type": "password",
    "password": "P@ssw0rd!",
    "user_name": "jimcarrey"
  }'</code></pre>
</div>

<div class="fragment fade-in-then-out">
  <p>
    If the request was successful, the server responds with a
    <code>201 Created</code> status code with the response body containing the
    access and refresh token.
  </p>
</div>

<div class="fragment fade-in-then-out">
  <h5>Create ingredients</h5>
  <p>Ingredients are fundamental components used to create dishes.</p>
</div>
<div class="fragment fade-in-then-out">
  <p>
    Admins create ingredients and specify their quantity to track inventory
    levels accurately.
  </p>
</div>
<div class="fragment fade-in-then-out">
  <p>
    This ensures there are sufficient ingredients available to fulfill patron
    orders.
  </p>
</div>

<div class="fragment fade-in-then-out">
  <p>This is achieved by making an HTTP request to the following endpoint:</p>
  <div class="operation-container">
    <div class="operation operation-post">
      <div class="method method-post">POST</div>
      <div class="path">/ingredients</div>
      <div class="summary">
        Create an ingredient
        <div class="right-icons">
          <div class="auth-btn-container locked">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 20 20"
              class="locked"
              width="20"
              height="20"
              aria-hidden="true"
              focusable="false"
            >
              <path
                d="M15.8 8H14V5.6C14 2.703 12.665 1 10 1 7.334 1 6 2.703 6 5.6V8H4c-.553 0-1 .646-1 1.199V17c0 .549.428 1.139.951 1.307l1.197.387C5.672 18.861 6.55 19 7.1 19h5.8c.549 0 1.428-.139 1.951-.307l1.196-.387c.524-.167.953-.757.953-1.306V9.199C17 8.646 16.352 8 15.8 8zM12 8H8V5.199C8 3.754 8.797 3 10 3c1.203 0 2 .754 2 2.199V8z"
              ></path>
            </svg>
          </div>

          <div class="op-block-arrow-container">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 20 20"
              class="arrow"
              width="20"
              height="20"
              aria-hidden="true"
              focusable="false"
            >
              <path
                d="M17.418 6.109c.272-.268.709-.268.979 0s.271.701 0 .969l-7.908 7.83c-.27.268-.707.268-.979 0l-7.908-7.83c-.27-.268-.27-.701 0-.969.271-.268.709-.268.979 0L10 13.25l7.418-7.141z"
              ></path>
            </svg>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="fragment fade-in-then-out">
  <p>
    The API client sends an HTTP request to create a new ingredient and sets the
    quantity.
  </p>

  <pre><code data-line-numbers="7-9" class="langage-shell">curl -X 'POST' \
'http://localhost:8080/ingredients' \
-H 'accept: application/json' \
-H 'Authorization: Bearer d602ff5d-d9d7-4e9c-a9ec-2fe358c1cc98' \
-H 'Content-Type: application/json' \
-d '{
    "in_stock_qty": 3,
    "name": "Carrots",
    "price": 199
  }'</code></pre>
</div>

<div class="fragment fade-in-then-out">
  <p>
    If the request was successful, the server responds with a
    <code>201 Created</code> status code with the response body containing the
    full resource.
  </p>
</div>

<div class="fragment fade-in-then-out">
  <p>
    The ingredient ID returned in the response can be used to associate the
    ingredient with a dish.
  </p>
  <pre><code class="language-json" data-line-numbers="2">{
    "id": "66e2fc54ea5ad311fdfc563f",
    "created_at": "2024-09-12T14:36:04.836Z",
    "updated_at": "2024-09-12T14:36:04.836Z",
    "name": "Carrot",
    "in_stock_qty": 3,
    "price": 199
}</code></pre>
</div>
<div class="fragment fade-in-then-out">
  <p>
    The quantity can be used to track if the ingredient has a positive quantity.
  </p>
  <pre><code class="language-json" data-line-numbers="6">{
    "id": "66e2fc54ea5ad311fdfc563f",
    "created_at": "2024-09-12T14:36:04.836Z",
    "updated_at": "2024-09-12T14:36:04.836Z",
    "name": "Carrot",
    "in_stock_qty": 3,
    "price": 199
}</code></pre>
</div>

<div class="fragment fade-in-then-out">
  <h5>Create dishes</h5>
  <p>
    Admins create dishes by associating them with the necessary ingredients.
  </p>
</div>

<div class="fragment fade-in-then-out">
  <p>This is achieved by making an HTTP request to the following endpoint:</p>
  <div class="operation-container">
    <div class="operation operation-post">
      <div class="method method-post">POST</div>
      <div class="path">/dishes</div>
      <div class="summary">Create a dish</div>
      <div class="right-icons">
        <div class="auth-btn-container locked">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 20 20"
            class="locked"
            width="20"
            height="20"
            aria-hidden="true"
            focusable="false"
          >
            <path
              d="M15.8 8H14V5.6C14 2.703 12.665 1 10 1 7.334 1 6 2.703 6 5.6V8H4c-.553 0-1 .646-1 1.199V17c0 .549.428 1.139.951 1.307l1.197.387C5.672 18.861 6.55 19 7.1 19h5.8c.549 0 1.428-.139 1.951-.307l1.196-.387c.524-.167.953-.757.953-1.306V9.199C17 8.646 16.352 8 15.8 8zM12 8H8V5.199C8 3.754 8.797 3 10 3c1.203 0 2 .754 2 2.199V8z"
            ></path>
          </svg>
        </div>

        <div class="op-block-arrow-container">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 20 20"
            class="arrow"
            width="20"
            height="20"
            aria-hidden="true"
            focusable="false"
          >
            <path
              d="M17.418 6.109c.272-.268.709-.268.979 0s.271.701 0 .969l-7.908 7.83c-.27.268-.707.268-.979 0l-7.908-7.83c-.27-.268-.27-.701 0-.969.271-.268.709-.268.979 0L10 13.25l7.418-7.141z"
            ></path>
          </svg>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="fragment fade-in-then-out">
  <p>The API client sends an HTTP request, specifying the dish's details:</p>

  <pre><code class="langage-shell">curl -X 'POST' \
'http://localhost:8080/dishes' \
-H 'accept: application/json' \
-H 'Authorization: ••••••' \
-H 'Content-Type: application/json' \
-d '{
    "Name": "Boardwalk burger",
    "description": "A delicious juicy burger.",
    "price": 9.99,
    "image_name": "burger.jpg",
    "station": "hot",
    "ingredients": [
      {
        "ingredient_id": "66294b2a4475a41f3e709bc5",
        "is_essential": true
      },
      {
        "ingredient_id": "66294b2a4475a41f3e709bc6",
        "is_essential": true
      },
      {
        "ingredient_id": "66294b2a4475a41f3e709bc7",
        "is_essential": false
      }
    ]
  }'</code></pre>
</div>

<div class="fragment fade-in-then-out">
  <p>
    Each ingredient is either essential or not essential to preparing the dish.
  </p>

  <pre><code class="langage-shell" data-line-numbers="15-16,19-20,23-24">curl -X 'POST' \
    'http://localhost:8080/dishes' \
    -H 'accept: application/json' \
    -H 'Authorization: ••••••' \
    -H 'Content-Type: application/json' \
    -d '{
        "Name": "Boardwalk burger",
        "description": "A delicious juicy burger.",
        "price": 9.99,
        "image_name": "burger.jpg",
        "station": "hot",
        "ingredients": [
          {
            "ingredient_id": "66294b2a4475a41f3e709bc5",
            "is_essential": true
          },
          {
            "ingredient_id": "66294b2a4475a41f3e709bc6",
            "is_essential": true
          },
          {
            "ingredient_id": "66294b2a4475a41f3e709bc7",
            "is_essential": false
          }
        ]
      }'</code></pre>
</div>

<div class="fragment fade-in-then-out">
  <p>
    This feature ensures dishes are correctly displayed in the user interface
    and indicates availability to customers.
  </p>
</div>

<div class="fragment fade-in-then-out">
  <p>
    If the request was successful, the server responds with a
    <code>201 Created</code> status code with the response body containing the
    full resource.
  </p>
</div>

<div class="fragment fade-in-then-out">
  <h5>Demo: Sequence diagramming</h5>
</div>
